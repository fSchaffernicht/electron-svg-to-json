{"ast":null,"code":"'use strict';\n\nexports.type = 'perItem';\nexports.active = true;\nexports.description = 'removes hidden elements (zero sized, with absent attributes)';\nexports.params = {\n  displayNone: true,\n  opacity0: true,\n  circleR0: true,\n  ellipseRX0: true,\n  ellipseRY0: true,\n  rectWidth0: true,\n  rectHeight0: true,\n  patternWidth0: true,\n  patternHeight0: true,\n  imageWidth0: true,\n  imageHeight0: true,\n  pathEmptyD: true,\n  polylineEmptyPoints: true,\n  polygonEmptyPoints: true\n};\nvar regValidPath = /M\\s*(?:[-+]?(?:\\d*\\.\\d+|\\d+(?:\\.|(?!\\.)))([eE][-+]?\\d+)?(?!\\d)\\s*,?\\s*){2}\\D*\\d/i;\n/**\n * Remove hidden elements with disabled rendering:\n * - display=\"none\"\n * - opacity=\"0\"\n * - circle with zero radius\n * - ellipse with zero x-axis or y-axis radius\n * - rectangle with zero width or height\n * - pattern with zero width or height\n * - image with zero width or height\n * - path with empty data\n * - polyline with empty points\n * - polygon with empty points\n *\n * @param {Object} item current iteration item\n * @param {Object} params plugin params\n * @return {Boolean} if false, item will be filtered out\n *\n * @author Kir Belevich\n */\n\nexports.fn = function (item, params) {\n  if (item.elem) {\n    // display=\"none\"\n    //\n    // http://www.w3.org/TR/SVG/painting.html#DisplayProperty\n    // \"A value of display: none indicates that the given element\n    // and its children shall not be rendered directly\"\n    if (params.displayNone && item.hasAttr('display', 'none')) return false; // opacity=\"0\"\n    //\n    // http://www.w3.org/TR/SVG/masking.html#ObjectAndGroupOpacityProperties\n\n    if (params.opacity0 && item.hasAttr('opacity', '0')) return false; // Circles with zero radius\n    //\n    // http://www.w3.org/TR/SVG/shapes.html#CircleElementRAttribute\n    // \"A value of zero disables rendering of the element\"\n    //\n    // <circle r=\"0\">\n\n    if (params.circleR0 && item.isElem('circle') && item.isEmpty() && item.hasAttr('r', '0')) return false; // Ellipse with zero x-axis radius\n    //\n    // http://www.w3.org/TR/SVG/shapes.html#EllipseElementRXAttribute\n    // \"A value of zero disables rendering of the element\"\n    //\n    // <ellipse rx=\"0\">\n\n    if (params.ellipseRX0 && item.isElem('ellipse') && item.isEmpty() && item.hasAttr('rx', '0')) return false; // Ellipse with zero y-axis radius\n    //\n    // http://www.w3.org/TR/SVG/shapes.html#EllipseElementRYAttribute\n    // \"A value of zero disables rendering of the element\"\n    //\n    // <ellipse ry=\"0\">\n\n    if (params.ellipseRY0 && item.isElem('ellipse') && item.isEmpty() && item.hasAttr('ry', '0')) return false; // Rectangle with zero width\n    //\n    // http://www.w3.org/TR/SVG/shapes.html#RectElementWidthAttribute\n    // \"A value of zero disables rendering of the element\"\n    //\n    // <rect width=\"0\">\n\n    if (params.rectWidth0 && item.isElem('rect') && item.isEmpty() && item.hasAttr('width', '0')) return false; // Rectangle with zero height\n    //\n    // http://www.w3.org/TR/SVG/shapes.html#RectElementHeightAttribute\n    // \"A value of zero disables rendering of the element\"\n    //\n    // <rect height=\"0\">\n\n    if (params.rectHeight0 && params.rectWidth0 && item.isElem('rect') && item.isEmpty() && item.hasAttr('height', '0')) return false; // Pattern with zero width\n    //\n    // http://www.w3.org/TR/SVG/pservers.html#PatternElementWidthAttribute\n    // \"A value of zero disables rendering of the element (i.e., no paint is applied)\"\n    //\n    // <pattern width=\"0\">\n\n    if (params.patternWidth0 && item.isElem('pattern') && item.hasAttr('width', '0')) return false; // Pattern with zero height\n    //\n    // http://www.w3.org/TR/SVG/pservers.html#PatternElementHeightAttribute\n    // \"A value of zero disables rendering of the element (i.e., no paint is applied)\"\n    //\n    // <pattern height=\"0\">\n\n    if (params.patternHeight0 && item.isElem('pattern') && item.hasAttr('height', '0')) return false; // Image with zero width\n    //\n    // http://www.w3.org/TR/SVG/struct.html#ImageElementWidthAttribute\n    // \"A value of zero disables rendering of the element\"\n    //\n    // <image width=\"0\">\n\n    if (params.imageWidth0 && item.isElem('image') && item.hasAttr('width', '0')) return false; // Image with zero height\n    //\n    // http://www.w3.org/TR/SVG/struct.html#ImageElementHeightAttribute\n    // \"A value of zero disables rendering of the element\"\n    //\n    // <image height=\"0\">\n\n    if (params.imageHeight0 && item.isElem('image') && item.hasAttr('height', '0')) return false; // Path with empty data\n    //\n    // http://www.w3.org/TR/SVG/paths.html#DAttribute\n    //\n    // <path d=\"\"/>\n\n    if (params.pathEmptyD && item.isElem('path') && (!item.hasAttr('d') || !regValidPath.test(item.attr('d').value))) return false; // Polyline with empty points\n    //\n    // http://www.w3.org/TR/SVG/shapes.html#PolylineElementPointsAttribute\n    //\n    // <polyline points=\"\">\n\n    if (params.polylineEmptyPoints && item.isElem('polyline') && !item.hasAttr('points')) return false; // Polygon with empty points\n    //\n    // http://www.w3.org/TR/SVG/shapes.html#PolygonElementPointsAttribute\n    //\n    // <polygon points=\"\">\n\n    if (params.polygonEmptyPoints && item.isElem('polygon') && !item.hasAttr('points')) return false;\n  }\n};","map":null,"metadata":{},"sourceType":"script"}